<div *ngIf="loading; else result">
  <mat-spinner></mat-spinner>
</div>

<ng-template #result>
  <div
    *ngIf="!error"
    fxLayout="row wrap"
    fxLayoutGap="20px grid"
    fxLayoutGap.xs="10px grid"
  >
    <div
      fxFlex="25%"
      fxFlex.sm="33%"
      fxFlex.xs="100%"
      *ngFor="let product of products"
    >
      <mat-card class="mat-elevation-z4">
        <a [routerLink]="'/product/' + product.slug">
          <img mat-card-image [src]="product.image" />
          <mat-card-content>
            <p>
              {{ product.name }}
            </p>
            <app-rating [rating]="product.rating"></app-rating>
          </mat-card-content>
        </a>
        <mat-card-actions>
          <span>${{ product.price }}</span>
          <button mat-button (click)="addToCart(product)">ADD TO CART</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</ng-template>
